# 分散式微型水庫儲能系統
## 目的
本系統是回收再利用家中的洗澡水,虛擬化儲水在上游的水庫,讓上游的水庫可以有更多水可以供民生用水或是進行水力發電.
## 水庫有什麼功用?
在了解什麼是微型水庫前,我們先來講一下水庫.基本上,水庫就是在河川的上游集水區建立一個大壩,用來儲存上游的水.水庫有好幾種功用,底下依序列出
### 民生用水
水庫提供民生用水,在下雨時收集雨水,讓我們在平時沒有下雨時,仍然有從水庫來的穩定水資源.但若是水庫的水快沒了
### 水力發電     
若從能源的角度來看水庫,水庫是一個各國很常使用的發電裝置.基本的原理就是在利用水庫的高位能,將上下游的位能差,去帶動馬達發電,轉化成電能.
![](img/electricity.png)

### 儲存位能
有些水庫(像是明潭發電廠),則是會利用電量離峰的時段,將下游的水抽蓄到上游的水池去,把電能透過轉成水的位能方式,達成儲能的效果.在台灣,就有明潭水力發電廠,會將下池的庫水抽回到上池.        
![](img/Mingtan-Power-Station.jpg)

當政府在發展綠能發電時,首先遇到的問題就會是,大部分的綠能發電(風力,太陽能)都沒有辦法提供個穩定的基載電力.當天空突然出現一朵雲的時候,太陽能發電就會往下掉, 或是某天風力變弱的時候,風力發電也會跟著往下掉.這時候就需要儲能裝置放電去平順電壓.身為一個大型儲能系統的水庫,若有更多的水儲存在上游,那將可以產生更多的水力發電的機會.

## 水庫面臨的挑戰
目前台灣的水庫均有泥沙淤積的問題,從[新聞的報導](http://news.ltn.com.tw/news/life/breakingnews/2398506)裡提到,石門水庫原本庫容有3億噸，但受到長期流入庫區的泥沙等影響，目前庫容僅剩下約2億噸，面對每年桃園及板新地區共8億噸的用水，石門水庫1年周轉率要4次以上，因此，集水區在每季降雨量不足之下，往往會帶來缺水壓力。面對這樣的問題,除了要維護上游的水土保持之外,若每戶家庭都可以節約用水,那就會有更多的水是被儲存在上游的水庫中.這樣可以減少每年會遇到缺水的問題.

## 面臨經常性缺水的挑戰,我們可以在家做些什麼?
根據[新聞](http://news.ltn.com.tw/news/focus/paper/1150151)的報導,台灣平均的漏水率在105年是16%.漏水率指的是從水庫端的水,在運送水到用戶終點端中,運送過程中流失掉水的比例是多少.據個例子來說,若有上游水庫有一公升的水,運送到用戶端,將只會剩0.84公升(1*(1-0.16)).
換句話說,若你在家裡儲存一公升的水,在水庫端,就會多了1.19公升的水(1/(1-0.16)).當你在家裡越常使用回收水,就會在上游的水庫端儲存更多的水供民生用水或是發電.


## 儲水既然好處很多,為什麼大家不想做?
既然使用回收水可以讓上游的水庫有更多的水供民生用水,那為什麼一般人不想使用回收水?其中有一個原因是,儲存回收水太麻煩了.以台灣地區家庭用水比例來看,洗衣用水25%，洗澡用水21%，廁所用水21%，廚房用水25%，其他（洗手、洗臉等)8%. 若要大量地重複使用回收水,在考量用水地點的區域性後,一般人通常會把洗澡用水儲存起來沖馬桶.但是這個動作需要一個大人把水桶提起來,精準地倒在馬桶裡,並不是一件容易的事情.若是家中有小朋友,其實小朋友根本沒有能力做使用回收水這事.提水桶沖馬桶這事

## 微型水庫運作原理
微型水庫的設計初衷,就是讓家中小朋友在如廁後,不需要大人的協助,還是可以使用到回收水.讓家裡的每個人都可以輕鬆地使用到回收水.   
微型水庫運作的原理如下圖所示.當冬天洗澡時,由於一開始的水是冷的,並不適合淋浴,此時你可以幫這冰冷的水收集至位置較高的微型水庫(基本上就是一個水桶).這個微型水庫底部連接一根水管到馬桶儲水箱的一個控制器.此控制器裝有一個電磁閥開關,平時是關閉的,所以水不會往位置較低的馬桶儲水箱流動.此外,此控制器備有一個水位感測器,當偵測到如廁後水箱的水位降低時,就會自動開啟電磁閥開關,將回收水導入到馬桶儲水箱.當水位接近滿水的位置時,就會關閉電磁閥開關.
![](img/systemOverview.jpg)

相信看完微型水庫的運作原理後,應該會感覺到這是一個很簡單的控制系統.雖然簡單,但卻很實際地達到省水的功效.底下先來看看依據這樣的設計做出來的樣貌.

## 微型水庫實景
### 微型水庫
### 控制器
### 電磁閥開關
- 位於馬桶水箱內部
### 水位感測器
- 位於馬桶水箱內部
### 馬桶全景
底下就介紹怎樣自行組裝這套系統
## 準備的器材
目前先把準備的器材分成3類,一類是比較偏向控制器的器材,另一類則是偏向水路管線的器材. 最後一類則是安裝外殼的器材
### 控制器
- MTK linkit 7697
    - 會選擇這顆晶片,主要是考量他有內建ADC,可以不用額外外掛太多的硬體,就能讀取到從水位感測器來的類比訊號.對於不太懂硬體的人來說,可以省去不少麻煩.
    - 這顆晶片可以使用Arduino撰寫,寫程式還蠻容易的
    - 這顆晶片本身支援BT和Wifi,若考慮日後要將資料自動上傳,這晶片可以在不用外掛額外晶片的情況下,將資料傳到Server
    - 這顆晶片的電源輸入是micro USB 接頭,可以直接將手機充電使用充電插頭接過來使用ㄡ
    - 這顆晶片還算便宜
        - [購買資訊](https://www.taiwaniot.com.tw/shop/mcuboard/linkit-one/linkit-7697-開發板-聯發科-2017-最新-mt7697-家庭物聯網平台/)      

- 4分管常閉式進水電磁閥 DC12V
    - 此電磁閥將會控制水路的開關
    - [參考購買資訊](http://www.buyic.com.tw/product_info.php?products_id=6490)
- 繼電器
  - 繼電器可以使用低電壓(5V)的訊號去控制需要高電壓(12V)的開關
  - [購買參考資訊](https://www.taiwaniot.com.tw/product/grove-relay-%E7%B9%BC%E9%9B%BB%E5%99%A8%E6%A8%A1%E7%B5%84-%E5%B3%B0%E5%80%BC%E9%9B%BB%E5%A3%93%E8%83%BD%E5%8A%9B250v-10%E5%AE%89%E5%9F%B9/)        

- 升壓模組
    - 將5V的電壓升壓成電磁閥所需要的12V電壓
        - [購買參考資訊](https://www.taiwaniot.com.tw/product/dc-dc%E9%9B%BB%E5%A3%93%E5%8D%87%E5%A3%93%E6%A8%A1%E7%B5%84-2a-%E5%8F%AF%E8%AA%BF%E5%BC%8F%E5%8D%87%E5%A3%93%E6%9D%BF-%E5%85%B7-microusb-%E8%BC%B8%E5%85%A5%E6%8E%A5%E5%8F%A3/)
- 水位感測器
    - 目前使用浮球液位開關
        - [購買參考資訊](http://goods.ruten.com.tw/item/show?21701022202739)
- 電阻
    - 7697 的 ADC 輸入電壓範圍是 0 到2.5V,我們需要兩顆電阻將電壓分壓到2.5V以下
    - 10K, 100K 1/4W即可
- 麵包板
    - 懶得焊接,所以所有的線都是直接接在麵包板上,方便做實驗.
-  接線
    -  需要一些接線將每個硬體模組串接在一起

### 管線&微型水庫容器
- 
### 裝置外殼
- 
## 安裝
### 控制器電路圖


### 管路接線

### 程式

### 預估省水量

### 安裝計時器省電

